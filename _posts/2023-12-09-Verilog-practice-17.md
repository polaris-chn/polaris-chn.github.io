---
layout: post
title: Verilog编程-17. 流水线设计
categories: Verilog
description: 对于流水线设计的思考总结
keywords: Verilog pipeline
---

# Verilog编程-17. 流水线设计

## 背景
流水线是一个纯粹的数字电路概念，同时流水线会被阻塞。若流水线的某一级被阻塞，那么整个流水线都会被阻塞，也就是前级、后级的数据都要保存在本级中，直至流水线阻塞消失。

对于如何控制流水线阻塞以及运行，可以有两种策略：
### 策略1
设置一个总控制模块，可以同时看到各级流水线状态，并对所有流水线下达命令。一旦在某一时刻发现某个流水级出现问题，则向这级流水之前的所有流水级发出命令，阻塞数据传递；
### 策略2
对每一级，同时和前后级进行沟通，决定下一时钟周期是否向后传递数据。就某一级而言，会向后一级发出一个“下一时刻我有东西传给你”的请求，同时向上一级发出“下一时刻我可以接受数据”的反馈。若无法接受，则向前级发出阻塞信号，前级必须保持数据直到本级可以接受信号。

在使用了总线的设计中，策略2更友好。

在分析流水线数据传递的时候，只需要知道，在时钟周期上升沿，本级采到的信号只和前级有关，所以只要看前级的数据即可，这样可以简化数据寻找的思路。